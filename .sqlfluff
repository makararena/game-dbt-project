# =============================================================================
# SQLFluff — линтер для SQL. Ниже настройки и пояснения к каждой опции.
# =============================================================================

[sqlfluff]
# Диалект SQL: Snowflake. Определяет допустимый синтаксис, ключевые слова,
# функции (например, LISTAGG, QUALIFY). От этого зависят правила линтера.
dialect = snowflake

# Шаблонизатор: dbt. SQLFluff будет раскрывать Jinja ({% if %}, {{ ref() }}, и т.д.)
# перед проверкой, иначе линтер видел бы сырой Jinja как ошибку.
templater = dbt

# Максимальная длина строки в символах. Строки длиннее 120 символов
# будут помечаться (правило L016). Удобно для читаемости и ревью.
max_line_length = 120

# Каталоги для линтинга. Указан только models — проверяем только dbt-модели,
# не макросы и не тесты (их можно добавить при необходимости).
paths = models

# Список правил, которые отключить (через запятую). Раскомментируйте и добавьте
# коды правил, если какое-то правило мешает (например L009 — trailing whitespace,
# L010 — капитализация, L030 — лишние пробелы).
# exclude_rules = L009,L010,L030

# -----------------------------------------------------------------------------
# Настройки шаблонизатора dbt
# -----------------------------------------------------------------------------
[sqlfluff:templater:dbt]
# Корневая папка dbt-проекта (где лежит dbt_project.yml). Нужно, чтобы SQLFluff
# нашёл конфиг dbt и корректно раскрыл ref(), source(), env_var() и другие вызовы.
project_dir = .

# -----------------------------------------------------------------------------
# Отступы
# -----------------------------------------------------------------------------
[sqlfluff:indentation]
# Единица отступа: пробелы (space). Другой вариант — tab. Единообразие отступов
# проверяется правилами линтера.
indent_unit = space

# -----------------------------------------------------------------------------
# Расположение запятых в списках (SELECT, GROUP BY, и т.д.)
# -----------------------------------------------------------------------------
[sqlfluff:layout:type:comma]
# Запятая в конце строки (trailing). Пример: "col_a,\n  col_b" — запятая после col_a.
# Альтернатива: leading — запятая в начале следующей строки.
line_position = trailing
